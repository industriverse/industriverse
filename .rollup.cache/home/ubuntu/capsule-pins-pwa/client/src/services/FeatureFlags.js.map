{"version":3,"file":"FeatureFlags.js","sourceRoot":"","sources":["FeatureFlags.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Feature Flags Service\n * Week 8: White-Label Platform - Phase 4\n * \n * Per-tenant feature flag management for white-label deployments.\n * Enables/disables features at runtime without code changes.\n */\n\nexport interface FeatureFlag {\n  key: string;\n  name: string;\n  description: string;\n  enabled: boolean;\n  tenantId?: string;\n  category: 'core' | 'widget' | 'ami' | 'integration' | 'experimental';\n}\n\nexport interface TenantFeatureConfig {\n  tenantId: string;\n  tenantName: string;\n  flags: Record<string, boolean>;\n}\n\n/**\n * Default feature flags available across all deployments\n */\nexport const DEFAULT_FEATURE_FLAGS: FeatureFlag[] = [\n  // Core Features\n  {\n    key: 'websocket_realtime',\n    name: 'WebSocket Real-Time Updates',\n    description: 'Enable real-time capsule updates via WebSocket',\n    enabled: true,\n    category: 'core',\n  },\n  {\n    key: 'offline_mode',\n    name: 'Offline Mode',\n    description: 'Enable offline-first PWA capabilities',\n    enabled: true,\n    category: 'core',\n  },\n  {\n    key: 'push_notifications',\n    name: 'Push Notifications',\n    description: 'Enable browser push notifications',\n    enabled: true,\n    category: 'core',\n  },\n\n  // Widget Features\n  {\n    key: 'widget_wallet_orb',\n    name: 'Wallet Orb Widget',\n    description: 'Enable wallet balance visualization widget',\n    enabled: true,\n    category: 'widget',\n  },\n  {\n    key: 'widget_proof_ticker',\n    name: 'Proof Ticker Widget',\n    description: 'Enable proof generation feed widget',\n    enabled: true,\n    category: 'widget',\n  },\n  {\n    key: 'widget_capsule_card',\n    name: 'Capsule Card Widget',\n    description: 'Enable capsule display widget',\n    enabled: true,\n    category: 'widget',\n  },\n  {\n    key: 'widget_energy_gauge',\n    name: 'Energy Gauge Widget',\n    description: 'Enable energy visualization widget',\n    enabled: true,\n    category: 'widget',\n  },\n  {\n    key: 'widget_utid_badge',\n    name: 'UTID Badge Widget',\n    description: 'Enable UTID display widget',\n    enabled: true,\n    category: 'widget',\n  },\n  {\n    key: 'widget_ami_pulse',\n    name: 'AmI Pulse Widget',\n    description: 'Enable ambient intelligence activity widget',\n    enabled: true,\n    category: 'widget',\n  },\n  {\n    key: 'widget_shadow_twin',\n    name: 'Shadow Twin Widget',\n    description: 'Enable digital twin sync widget',\n    enabled: true,\n    category: 'widget',\n  },\n\n  // AmI Features\n  {\n    key: 'ami_context_awareness',\n    name: 'Context Awareness',\n    description: 'Enable AmI context-aware intelligence',\n    enabled: true,\n    category: 'ami',\n  },\n  {\n    key: 'ami_proactive',\n    name: 'Proactive Intelligence',\n    description: 'Enable AmI proactive predictions',\n    enabled: true,\n    category: 'ami',\n  },\n  {\n    key: 'ami_seamless',\n    name: 'Seamless Integration',\n    description: 'Enable AmI seamless user experience',\n    enabled: true,\n    category: 'ami',\n  },\n  {\n    key: 'ami_adaptive',\n    name: 'Adaptive Learning',\n    description: 'Enable AmI adaptive behavior',\n    enabled: true,\n    category: 'ami',\n  },\n  {\n    key: 'cosmic_fabric',\n    name: 'Cosmic Intelligence Fabric',\n    description: 'Enable federated learning across deployments',\n    enabled: true,\n    category: 'ami',\n  },\n\n  // Integration Features\n  {\n    key: 'mcp_protocol',\n    name: 'MCP Protocol',\n    description: 'Enable Model Context Protocol integration',\n    enabled: true,\n    category: 'integration',\n  },\n  {\n    key: 'a2a_protocol',\n    name: 'A2A Protocol',\n    description: 'Enable Agent-to-Agent communication',\n    enabled: true,\n    category: 'integration',\n  },\n  {\n    key: 'thermal_computing',\n    name: 'Thermal Computing',\n    description: 'Enable JAX/Jasmin thermodynamic computing',\n    enabled: true,\n    category: 'integration',\n  },\n  {\n    key: 'microadapt_edge',\n    name: 'MicroAdaptEdge',\n    description: 'Enable edge device optimization',\n    enabled: true,\n    category: 'integration',\n  },\n\n  // Experimental Features\n  {\n    key: 'experimental_voice_control',\n    name: 'Voice Control',\n    description: 'Enable voice commands for capsule management',\n    enabled: false,\n    category: 'experimental',\n  },\n  {\n    key: 'experimental_ar_view',\n    name: 'AR Visualization',\n    description: 'Enable augmented reality capsule visualization',\n    enabled: false,\n    category: 'experimental',\n  },\n  {\n    key: 'experimental_quantum_sim',\n    name: 'Quantum Simulation',\n    description: 'Enable quantum computing simulation for optimization',\n    enabled: false,\n    category: 'experimental',\n  },\n];\n\n/**\n * Feature Flags Manager\n */\nexport class FeatureFlagsManager {\n  private flags: Map<string, boolean> = new Map();\n  private tenantId: string | null = null;\n  private listeners: Set<(flags: Map<string, boolean>) => void> = new Set();\n\n  constructor() {\n    this.loadFlags();\n  }\n\n  /**\n   * Initialize feature flags for a specific tenant\n   */\n  initialize(tenantId: string, config?: TenantFeatureConfig): void {\n    this.tenantId = tenantId;\n    \n    if (config) {\n      // Load tenant-specific configuration\n      Object.entries(config.flags).forEach(([key, enabled]) => {\n        this.flags.set(key, enabled);\n      });\n    } else {\n      // Load default flags\n      DEFAULT_FEATURE_FLAGS.forEach(flag => {\n        this.flags.set(flag.key, flag.enabled);\n      });\n    }\n\n    this.saveFlags();\n    this.notifyListeners();\n  }\n\n  /**\n   * Check if a feature is enabled\n   */\n  isEnabled(flagKey: string): boolean {\n    return this.flags.get(flagKey) ?? false;\n  }\n\n  /**\n   * Enable a feature flag\n   */\n  enable(flagKey: string): void {\n    this.flags.set(flagKey, true);\n    this.saveFlags();\n    this.notifyListeners();\n  }\n\n  /**\n   * Disable a feature flag\n   */\n  disable(flagKey: string): void {\n    this.flags.set(flagKey, false);\n    this.saveFlags();\n    this.notifyListeners();\n  }\n\n  /**\n   * Toggle a feature flag\n   */\n  toggle(flagKey: string): void {\n    const current = this.isEnabled(flagKey);\n    this.flags.set(flagKey, !current);\n    this.saveFlags();\n    this.notifyListeners();\n  }\n\n  /**\n   * Get all flags with their current state\n   */\n  getAllFlags(): FeatureFlag[] {\n    return DEFAULT_FEATURE_FLAGS.map(flag => ({\n      ...flag,\n      enabled: this.isEnabled(flag.key),\n      tenantId: this.tenantId ?? undefined,\n    }));\n  }\n\n  /**\n   * Get flags by category\n   */\n  getFlagsByCategory(category: FeatureFlag['category']): FeatureFlag[] {\n    return this.getAllFlags().filter(flag => flag.category === category);\n  }\n\n  /**\n   * Bulk update flags\n   */\n  updateFlags(updates: Record<string, boolean>): void {\n    Object.entries(updates).forEach(([key, enabled]) => {\n      this.flags.set(key, enabled);\n    });\n    this.saveFlags();\n    this.notifyListeners();\n  }\n\n  /**\n   * Reset all flags to defaults\n   */\n  resetToDefaults(): void {\n    this.flags.clear();\n    DEFAULT_FEATURE_FLAGS.forEach(flag => {\n      this.flags.set(flag.key, flag.enabled);\n    });\n    this.saveFlags();\n    this.notifyListeners();\n  }\n\n  /**\n   * Export current configuration\n   */\n  exportConfig(): TenantFeatureConfig {\n    const flagsObj: Record<string, boolean> = {};\n    this.flags.forEach((enabled, key) => {\n      flagsObj[key] = enabled;\n    });\n\n    return {\n      tenantId: this.tenantId ?? 'default',\n      tenantName: 'Default Tenant',\n      flags: flagsObj,\n    };\n  }\n\n  /**\n   * Import configuration\n   */\n  importConfig(config: TenantFeatureConfig): void {\n    this.initialize(config.tenantId, config);\n  }\n\n  /**\n   * Subscribe to flag changes\n   */\n  subscribe(listener: (flags: Map<string, boolean>) => void): () => void {\n    this.listeners.add(listener);\n    return () => this.listeners.delete(listener);\n  }\n\n  /**\n   * Load flags from localStorage\n   */\n  private loadFlags(): void {\n    try {\n      const stored = localStorage.getItem('feature_flags');\n      if (stored) {\n        const data = JSON.parse(stored);\n        Object.entries(data).forEach(([key, enabled]) => {\n          this.flags.set(key, enabled as boolean);\n        });\n      } else {\n        // Initialize with defaults\n        DEFAULT_FEATURE_FLAGS.forEach(flag => {\n          this.flags.set(flag.key, flag.enabled);\n        });\n      }\n    } catch (error) {\n      console.error('Failed to load feature flags:', error);\n    }\n  }\n\n  /**\n   * Save flags to localStorage\n   */\n  private saveFlags(): void {\n    try {\n      const data: Record<string, boolean> = {};\n      this.flags.forEach((enabled, key) => {\n        data[key] = enabled;\n      });\n      localStorage.setItem('feature_flags', JSON.stringify(data));\n    } catch (error) {\n      console.error('Failed to save feature flags:', error);\n    }\n  }\n\n  /**\n   * Notify all listeners of flag changes\n   */\n  private notifyListeners(): void {\n    this.listeners.forEach(listener => {\n      listener(new Map(this.flags));\n    });\n  }\n}\n\n// Singleton instance\nexport const featureFlags = new FeatureFlagsManager();\n\n/**\n * React hook for feature flags\n */\nexport function useFeatureFlag(flagKey: string): boolean {\n  const [enabled, setEnabled] = React.useState(() => featureFlags.isEnabled(flagKey));\n\n  React.useEffect(() => {\n    const unsubscribe = featureFlags.subscribe((flags) => {\n      setEnabled(flags.get(flagKey) ?? false);\n    });\n    return unsubscribe;\n  }, [flagKey]);\n\n  return enabled;\n}\n\n/**\n * React hook for all feature flags\n */\nexport function useFeatureFlags(): FeatureFlag[] {\n  const [flags, setFlags] = React.useState(() => featureFlags.getAllFlags());\n\n  React.useEffect(() => {\n    const unsubscribe = featureFlags.subscribe(() => {\n      setFlags(featureFlags.getAllFlags());\n    });\n    return unsubscribe;\n  }, []);\n\n  return flags;\n}\n\n// Add React import for hooks\nimport React from 'react';\n"]}