{"version":3,"file":"input.jsx","sourceRoot":"","sources":["input.tsx"],"names":[],"mappings":";AAAA,OAAO,EAAE,oBAAoB,EAAE,MAAM,wBAAwB,CAAC;AAC9D,OAAO,EAAE,cAAc,EAAE,MAAM,wBAAwB,CAAC;AACxD,OAAO,EAAE,EAAE,EAAE,MAAM,aAAa,CAAC;AACjC,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAE/B,SAAS,KAAK,CAAC,EAOiB;IAN9B,IAAA,SAAS,eAAA,EACT,IAAI,UAAA,EACJ,SAAS,eAAA,EACT,kBAAkB,wBAAA,EAClB,gBAAgB,sBAAA,EACb,KAAK,cANK,4EAOd,CADS;IAER,mFAAmF;IACnF,IAAM,iBAAiB,GAAG,oBAAoB,EAAE,CAAC;IAEjD,yFAAyF;IACnF,IAAA,KAIF,cAAc,CAAmB;QACnC,SAAS,EAAE,UAAC,CAAC;YACX,uDAAuD;YACvD,IAAM,WAAW,GAAI,CAAC,CAAC,WAAmB,CAAC,WAAW,IAAI,iBAAiB,CAAC,kBAAkB,EAAE,CAAC;YAEjG,2EAA2E;YAC3E,mEAAmE;YACnE,IAAI,CAAC,CAAC,GAAG,KAAK,OAAO,IAAI,WAAW,EAAE,CAAC;gBACrC,OAAO;YACT,CAAC;YAED,uCAAuC;YACvC,SAAS,aAAT,SAAS,uBAAT,SAAS,CAAG,CAAC,CAAC,CAAC;QACjB,CAAC;QACD,kBAAkB,EAAE,UAAA,CAAC;YACnB,iBAAiB,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;YACrC,kBAAkB,aAAlB,kBAAkB,uBAAlB,kBAAkB,CAAG,CAAC,CAAC,CAAC;QAC1B,CAAC;QACD,gBAAgB,EAAE,UAAA,CAAC;YACjB,yFAAyF;YACzF,iBAAiB,CAAC,kBAAkB,EAAE,CAAC;YACvC,kEAAkE;YAClE,+DAA+D;YAC/D,UAAU,CAAC;gBACT,iBAAiB,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;YACxC,CAAC,EAAE,GAAG,CAAC,CAAC;YACR,gBAAgB,aAAhB,gBAAgB,uBAAhB,gBAAgB,CAAG,CAAC,CAAC,CAAC;QACxB,CAAC;KACF,CAAC,EA/BoB,sBAAsB,wBAAA,EACxB,oBAAoB,sBAAA,EAC3B,aAAa,eA6BxB,CAAC;IAEH,OAAO,CACL,CAAC,KAAK,CACJ,IAAI,CAAC,CAAC,IAAI,CAAC,CACX,SAAS,CAAC,OAAO,CACjB,SAAS,CAAC,CAAC,EAAE,CACX,4bAA4b,EAC5b,+EAA+E,EAC/E,wGAAwG,EACxG,SAAS,CACV,CAAC,CACF,kBAAkB,CAAC,CAAC,sBAAsB,CAAC,CAC3C,gBAAgB,CAAC,CAAC,oBAAoB,CAAC,CACvC,SAAS,CAAC,CAAC,aAAa,CAAC,CACzB,IAAI,KAAK,CAAC,EACV,CACH,CAAC;AACJ,CAAC;AAED,OAAO,EAAE,KAAK,EAAE,CAAC","sourcesContent":["import { useDialogComposition } from \"@/components/ui/dialog\";\nimport { useComposition } from \"@/hooks/useComposition\";\nimport { cn } from \"@/lib/utils\";\nimport * as React from \"react\";\n\nfunction Input({\n  className,\n  type,\n  onKeyDown,\n  onCompositionStart,\n  onCompositionEnd,\n  ...props\n}: React.ComponentProps<\"input\">) {\n  // Get dialog composition context if available (will be no-op if not inside Dialog)\n  const dialogComposition = useDialogComposition();\n\n  // Add composition event handlers to support input method editor (IME) for CJK languages.\n  const {\n    onCompositionStart: handleCompositionStart,\n    onCompositionEnd: handleCompositionEnd,\n    onKeyDown: handleKeyDown,\n  } = useComposition<HTMLInputElement>({\n    onKeyDown: (e) => {\n      // Check if this is an Enter key that should be blocked\n      const isComposing = (e.nativeEvent as any).isComposing || dialogComposition.justEndedComposing();\n\n      // If Enter key is pressed while composing or just after composition ended,\n      // don't call the user's onKeyDown (this blocks the business logic)\n      if (e.key === \"Enter\" && isComposing) {\n        return;\n      }\n\n      // Otherwise, call the user's onKeyDown\n      onKeyDown?.(e);\n    },\n    onCompositionStart: e => {\n      dialogComposition.setComposing(true);\n      onCompositionStart?.(e);\n    },\n    onCompositionEnd: e => {\n      // Mark that composition just ended - this helps handle the Enter key that confirms input\n      dialogComposition.markCompositionEnd();\n      // Delay setting composing to false to handle Safari's event order\n      // In Safari, compositionEnd fires before the ESC keydown event\n      setTimeout(() => {\n        dialogComposition.setComposing(false);\n      }, 100);\n      onCompositionEnd?.(e);\n    },\n  });\n\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      onCompositionStart={handleCompositionStart}\n      onCompositionEnd={handleCompositionEnd}\n      onKeyDown={handleKeyDown}\n      {...props}\n    />\n  );\n}\n\nexport { Input };\n"]}