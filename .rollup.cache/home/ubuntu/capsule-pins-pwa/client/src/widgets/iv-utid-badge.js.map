{"version":3,"file":"iv-utid-badge.js","sourceRoot":"","sources":["iv-utid-badge.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * <iv-utid-badge> Widget\n * Week 8: White-Label Platform\n * \n * Universal Thermodynamic ID badge with blockchain verification\n * Features:\n * - UTID display with copy-to-clipboard\n * - Blockchain verification status\n * - QR code generation\n * - Provenance chain visualization\n * - AmI consciousness glow\n */\n\nimport { IVWidget } from './base/IVWidget';\n\ninterface UTIDData {\n  utid: string;\n  verified: boolean;\n  blockchainHash: string;\n  timestamp: number;\n  provenanceChain: string[];\n  consciousnessLevel: number; // 0-100\n  physicsDomain: string;\n}\n\nexport class IVUTIDBadge extends IVWidget {\n  protected attachEventListeners(): void {\n    const copyBtn = this.shadowRoot?.querySelector('.copy-btn');\n    const qrBtn = this.shadowRoot?.querySelector('.qr-btn');\n    \n    copyBtn?.addEventListener('click', () => this.copyUTID());\n    qrBtn?.addEventListener('click', () => this.showQRCode());\n  }\n\n  protected utidData: UTIDData = {\n    utid: '',\n    verified: false,\n    blockchainHash: '',\n    timestamp: Date.now(),\n    provenanceChain: [],\n    consciousnessLevel: 0,\n    physicsDomain: 'unknown',\n  };\n\n  protected showingQR: boolean = false;\n\n  constructor() {\n    super();\n  }\n\n  protected getDefaultStyles(): string {\n    return `\n      :host {\n        display: inline-block;\n        font-family: var(--font-sans, system-ui, sans-serif);\n      }\n\n      .badge-container {\n        background: var(--color-background, #1a1a1a);\n        border: 1px solid var(--color-border, #333);\n        border-radius: 8px;\n        padding: 12px 16px;\n        display: inline-flex;\n        align-items: center;\n        gap: 12px;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n        transition: all 0.3s ease;\n        cursor: pointer;\n      }\n\n      .badge-container:hover {\n        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);\n        transform: translateY(-1px);\n      }\n\n      .badge-container.verified {\n        border-color: var(--status-success, #10b981);\n        box-shadow: 0 0 15px rgba(16, 185, 129, 0.2);\n      }\n\n      .badge-container.consciousness {\n        animation: consciousness-pulse 3s ease-in-out infinite;\n      }\n\n      @keyframes consciousness-pulse {\n        0%, 100% {\n          box-shadow: 0 0 15px rgba(139, 92, 246, 0.3);\n        }\n        50% {\n          box-shadow: 0 0 25px rgba(139, 92, 246, 0.5);\n        }\n      }\n\n      .utid-icon {\n        width: 32px;\n        height: 32px;\n        border-radius: 50%;\n        background: linear-gradient(135deg, var(--brand-primary, #0ea5e9), var(--brand-secondary, #8b5cf6));\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 16px;\n        flex-shrink: 0;\n      }\n\n      .utid-content {\n        flex: 1;\n        min-width: 0;\n      }\n\n      .utid-label {\n        font-size: 10px;\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n        color: var(--color-muted-foreground, #888);\n        margin-bottom: 2px;\n      }\n\n      .utid-value {\n        font-family: var(--font-mono, 'JetBrains Mono', monospace);\n        font-size: 13px;\n        font-weight: 600;\n        color: var(--color-foreground, #e5e5e5);\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      .badge-actions {\n        display: flex;\n        gap: 8px;\n      }\n\n      .action-btn {\n        width: 28px;\n        height: 28px;\n        border: none;\n        background: var(--color-muted, #333);\n        border-radius: 4px;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.2s ease;\n        font-size: 14px;\n      }\n\n      .action-btn:hover {\n        background: var(--color-accent, #444);\n        transform: scale(1.1);\n      }\n\n      .action-btn:active {\n        transform: scale(0.95);\n      }\n\n      .verification-badge {\n        position: absolute;\n        top: -6px;\n        right: -6px;\n        width: 20px;\n        height: 20px;\n        background: var(--status-success, #10b981);\n        border-radius: 50%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 12px;\n        border: 2px solid var(--color-background, #1a1a1a);\n      }\n\n      .qr-modal {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0, 0, 0, 0.8);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 1000;\n      }\n\n      .qr-content {\n        background: var(--color-background, #1a1a1a);\n        border: 1px solid var(--color-border, #333);\n        border-radius: 12px;\n        padding: 24px;\n        max-width: 300px;\n        text-align: center;\n      }\n\n      .qr-code {\n        width: 200px;\n        height: 200px;\n        margin: 16px auto;\n        background: white;\n        border-radius: 8px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 12px;\n        color: #333;\n      }\n\n      .qr-close {\n        margin-top: 16px;\n        padding: 8px 16px;\n        background: var(--brand-primary, #0ea5e9);\n        border: none;\n        border-radius: 6px;\n        color: white;\n        cursor: pointer;\n        font-weight: 600;\n      }\n\n      .consciousness-indicator {\n        position: absolute;\n        bottom: -4px;\n        left: 50%;\n        transform: translateX(-50%);\n        width: 80%;\n        height: 3px;\n        background: rgba(139, 92, 246, 0.2);\n        border-radius: 2px;\n        overflow: hidden;\n      }\n\n      .consciousness-fill {\n        height: 100%;\n        background: linear-gradient(90deg, #8b5cf6, #06b6d4);\n        transition: width 0.5s ease;\n      }\n    `;\n  }\n\n  protected render(): void {\n    if (!this.shadowRoot) return;\n\n    const shortUTID = this.utidData.utid ? \n      `${this.utidData.utid.slice(0, 8)}...${this.utidData.utid.slice(-6)}` : \n      'No UTID';\n\n    const containerClasses = [\n      'badge-container',\n      this.utidData.verified ? 'verified' : '',\n      this.utidData.consciousnessLevel > 50 ? 'consciousness' : '',\n    ].filter(Boolean).join(' ');\n\n    this.shadowRoot.innerHTML = `\n      <style>${this.getDefaultStyles()}</style>\n      <div class=\"${containerClasses}\" style=\"position: relative;\">\n        <div class=\"utid-icon\">ðŸ”®</div>\n        <div class=\"utid-content\">\n          <div class=\"utid-label\">UTID</div>\n          <div class=\"utid-value\" title=\"${this.utidData.utid}\">${shortUTID}</div>\n        </div>\n        <div class=\"badge-actions\">\n          <button class=\"action-btn copy-btn\" title=\"Copy UTID\">ðŸ“‹</button>\n          <button class=\"action-btn qr-btn\" title=\"Show QR Code\">ðŸ“±</button>\n        </div>\n        ${this.utidData.verified ? '<div class=\"verification-badge\">âœ“</div>' : ''}\n        ${this.utidData.consciousnessLevel > 0 ? `\n          <div class=\"consciousness-indicator\">\n            <div class=\"consciousness-fill\" style=\"width: ${this.utidData.consciousnessLevel}%\"></div>\n          </div>\n        ` : ''}\n      </div>\n      ${this.showingQR ? this.renderQRModal() : ''}\n    `;\n\n    this.attachEventListeners();\n  }\n\n  protected renderQRModal(): string {\n    return `\n      <div class=\"qr-modal\">\n        <div class=\"qr-content\">\n          <h3 style=\"margin: 0 0 8px 0; color: var(--color-foreground, #e5e5e5);\">UTID QR Code</h3>\n          <div class=\"qr-code\">\n            QR Code<br/>\n            ${this.utidData.utid.slice(0, 12)}...\n          </div>\n          <div style=\"font-size: 11px; color: var(--color-muted-foreground, #888); margin-top: 8px;\">\n            Scan to verify on blockchain\n          </div>\n          <button class=\"qr-close\">Close</button>\n        </div>\n      </div>\n    `;\n  }\n\n  protected copyUTID(): void {\n    if (!this.utidData.utid) return;\n\n    navigator.clipboard.writeText(this.utidData.utid).then(() => {\n      this.emitEvent('utid-copied', { utid: this.utidData.utid });\n      \n      // Show feedback\n      const copyBtn = this.shadowRoot?.querySelector('.copy-btn');\n      if (copyBtn) {\n        copyBtn.textContent = 'âœ“';\n        setTimeout(() => {\n          copyBtn.textContent = 'ðŸ“‹';\n        }, 2000);\n      }\n    });\n  }\n\n  protected showQRCode(): void {\n    this.showingQR = true;\n    this.render();\n\n    // Attach close handler\n    const closeBtn = this.shadowRoot?.querySelector('.qr-close');\n    const modal = this.shadowRoot?.querySelector('.qr-modal');\n    \n    closeBtn?.addEventListener('click', () => {\n      this.showingQR = false;\n      this.render();\n    });\n\n    modal?.addEventListener('click', (e) => {\n      if (e.target === modal) {\n        this.showingQR = false;\n        this.render();\n      }\n    });\n\n    this.emitEvent('qr-shown', { utid: this.utidData.utid });\n  }\n\n  protected handleWebSocketMessage(data: any): void {\n    if (data.type === 'utid_update') {\n      this.updateUTID(data.data);\n    }\n  }\n\n  public updateUTID(data: Partial<UTIDData>): void {\n    this.utidData = { ...this.utidData, ...data };\n    this.render();\n    this.emitEvent('utid-update', this.utidData);\n  }\n\n  protected onConnect(): void {\n    this.render();\n  }\n\n  protected onDisconnect(): void {\n    // Cleanup\n  }\n\n  // Attribute handling\n  static get observedAttributes() {\n    return ['utid', 'verified', 'blockchain-hash', 'consciousness-level', 'physics-domain', 'ws-url'];\n  }\n\n  attributeChangedCallback(name: string, oldValue: string, newValue: string) {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'utid':\n        this.utidData.utid = newValue;\n        this.render();\n        break;\n      case 'verified':\n        this.utidData.verified = newValue === 'true';\n        this.render();\n        break;\n      case 'blockchain-hash':\n        this.utidData.blockchainHash = newValue;\n        this.render();\n        break;\n      case 'consciousness-level':\n        this.utidData.consciousnessLevel = parseFloat(newValue) || 0;\n        this.render();\n        break;\n      case 'physics-domain':\n        this.utidData.physicsDomain = newValue;\n        this.render();\n        break;\n      case 'ws-url':\n        this.config.wsUrl = newValue;\n        if (newValue) {\n          this.connectWebSocket();\n        }\n        break;\n    }\n  }\n}\n\n// Register custom element\nif (!customElements.get('iv-utid-badge')) {\n  customElements.define('iv-utid-badge', IVUTIDBadge);\n}\n"]}