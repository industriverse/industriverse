{"version":3,"file":"iv-proof-ticker.js","sourceRoot":"","sources":["iv-proof-ticker.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * <iv-proof-ticker> Widget\n * Week 8: White-Label Platform\n * \n * Real-time proof generation feed with scrolling ticker\n * \n * Usage:\n * <iv-proof-ticker\n *   ws-url=\"wss://api.industriverse.io/ws\"\n *   max-items=\"10\"\n *   scroll-speed=\"slow\"\n * ></iv-proof-ticker>\n */\n\nimport { IVWidget } from './base/IVWidget';\n\ninterface Proof {\n  id: string;\n  type: 'execution' | 'energy' | 'optimization' | 'calibration' | 'thermodynamic';\n  value: number;\n  timestamp: number;\n  source: string;\n}\n\nexport class IVProofTicker extends IVWidget {\n  private proofs: Proof[] = [];\n  private maxItems: number = 10;\n  private scrollSpeed: 'slow' | 'normal' | 'fast' = 'normal';\n\n  static get observedAttributes() {\n    return ['max-items', 'scroll-speed'];\n  }\n\n  protected handleAttributeChange(name: string, oldValue: string, newValue: string): void {\n    if (name === 'max-items') {\n      this.maxItems = parseInt(newValue) || 10;\n      this.trimProofs();\n    } else if (name === 'scroll-speed') {\n      this.scrollSpeed = (newValue as any) || 'normal';\n    }\n  }\n\n  protected shouldRerender(attributeName: string): boolean {\n    return attributeName === 'scroll-speed';\n  }\n\n  protected render(): void {\n    this.shadow.innerHTML = '';\n    this.applyStyles(this.getStyles());\n\n    const container = document.createElement('div');\n    container.className = 'proof-ticker-container';\n\n    const header = document.createElement('div');\n    header.className = 'ticker-header';\n    header.innerHTML = `\n      <span class=\"ticker-title\">Live Proofs</span>\n      <span class=\"ticker-count\" id=\"proof-count\">${this.proofs.length}</span>\n    `;\n\n    const tickerTrack = document.createElement('div');\n    tickerTrack.className = 'ticker-track';\n    tickerTrack.id = 'ticker-track';\n\n    this.renderProofs(tickerTrack);\n\n    container.appendChild(header);\n    container.appendChild(tickerTrack);\n    this.shadow.appendChild(container);\n  }\n\n  protected attachEventListeners(): void {\n    // Pause on hover\n    const track = this.shadow.getElementById('ticker-track');\n    if (track) {\n      track.addEventListener('mouseenter', () => {\n        track.style.animationPlayState = 'paused';\n      });\n      track.addEventListener('mouseleave', () => {\n        track.style.animationPlayState = 'running';\n      });\n    }\n  }\n\n  protected onWebSocketMessage(event: MessageEvent): void {\n    try {\n      const data = JSON.parse(event.data);\n      \n      if (data.type === 'proof_generated') {\n        this.addProof({\n          id: data.id,\n          type: data.proofType,\n          value: data.value,\n          timestamp: Date.now(),\n          source: data.source || 'Unknown',\n        });\n      }\n    } catch (error) {\n      console.error('Failed to parse WebSocket message:', error);\n    }\n  }\n\n  private addProof(proof: Proof): void {\n    this.proofs.unshift(proof);\n    this.trimProofs();\n    this.updateDisplay();\n    this.emitEvent('proof-added', proof);\n  }\n\n  private trimProofs(): void {\n    if (this.proofs.length > this.maxItems) {\n      this.proofs = this.proofs.slice(0, this.maxItems);\n    }\n  }\n\n  private updateDisplay(): void {\n    const track = this.shadow.getElementById('ticker-track');\n    const count = this.shadow.getElementById('proof-count');\n    \n    if (track) {\n      this.renderProofs(track);\n    }\n    \n    if (count) {\n      count.textContent = this.proofs.length.toString();\n    }\n  }\n\n  private renderProofs(container: HTMLElement): void {\n    container.innerHTML = '';\n    \n    if (this.proofs.length === 0) {\n      const empty = document.createElement('div');\n      empty.className = 'empty-state';\n      empty.textContent = 'Waiting for proofs...';\n      container.appendChild(empty);\n      return;\n    }\n\n    this.proofs.forEach(proof => {\n      const item = document.createElement('div');\n      item.className = `proof-item proof-type-${proof.type}`;\n      item.innerHTML = `\n        <span class=\"proof-icon\">${this.getProofIcon(proof.type)}</span>\n        <span class=\"proof-type\">${this.formatProofType(proof.type)}</span>\n        <span class=\"proof-value\">$${proof.value.toFixed(2)}</span>\n        <span class=\"proof-source\">${proof.source}</span>\n        <span class=\"proof-time\">${this.formatTime(proof.timestamp)}</span>\n      `;\n      container.appendChild(item);\n    });\n  }\n\n  private getProofIcon(type: string): string {\n    const icons = {\n      execution: '‚ö°',\n      energy: 'üîã',\n      optimization: 'üéØ',\n      calibration: 'üîß',\n      thermodynamic: 'üå°Ô∏è',\n    };\n    return icons[type as keyof typeof icons] || 'üìã';\n  }\n\n  private formatProofType(type: string): string {\n    return type.charAt(0).toUpperCase() + type.slice(1);\n  }\n\n  private formatTime(timestamp: number): string {\n    const seconds = Math.floor((Date.now() - timestamp) / 1000);\n    if (seconds < 60) return `${seconds}s ago`;\n    const minutes = Math.floor(seconds / 60);\n    if (minutes < 60) return `${minutes}m ago`;\n    const hours = Math.floor(minutes / 60);\n    return `${hours}h ago`;\n  }\n\n  private getStyles(): string {\n    const speedMap = {\n      slow: '60s',\n      normal: '30s',\n      fast: '15s',\n    };\n    const duration = speedMap[this.scrollSpeed];\n\n    return `\n      :host {\n        display: block;\n        width: 100%;\n      }\n\n      .proof-ticker-container {\n        background: ${this.theme.bgSecondary};\n        border: 1px solid ${this.theme.borderDefault};\n        border-radius: ${this.theme.radiusMd};\n        overflow: hidden;\n        box-shadow: ${this.theme.shadowMd};\n      }\n\n      .ticker-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 0.75rem 1rem;\n        background: ${this.theme.bgPrimary};\n        border-bottom: 1px solid ${this.theme.borderDefault};\n      }\n\n      .ticker-title {\n        font-family: ${this.theme.fontHeading};\n        font-size: 0.875rem;\n        font-weight: 600;\n        color: ${this.theme.fgPrimary};\n        text-transform: uppercase;\n        letter-spacing: 0.05em;\n      }\n\n      .ticker-count {\n        font-family: ${this.theme.fontMono};\n        font-size: 0.875rem;\n        font-weight: 600;\n        color: ${this.theme.brandPrimary};\n        background: ${this.theme.amiContextGlow};\n        padding: 0.25rem 0.5rem;\n        border-radius: 9999px;\n      }\n\n      .ticker-track {\n        padding: 0.5rem 0;\n        max-height: 300px;\n        overflow-y: auto;\n      }\n\n      .ticker-track::-webkit-scrollbar {\n        width: 6px;\n      }\n\n      .ticker-track::-webkit-scrollbar-track {\n        background: ${this.theme.bgPrimary};\n      }\n\n      .ticker-track::-webkit-scrollbar-thumb {\n        background: ${this.theme.borderDefault};\n        border-radius: 3px;\n      }\n\n      .proof-item {\n        display: flex;\n        align-items: center;\n        gap: 0.75rem;\n        padding: 0.75rem 1rem;\n        border-left: 3px solid transparent;\n        transition: all ${this.theme.durationNormal} ${this.theme.easingDefault};\n        animation: slideIn ${this.theme.durationNormal} ${this.theme.easingDefault};\n      }\n\n      .proof-item:hover {\n        background: ${this.theme.bgPrimary};\n      }\n\n      .proof-item.proof-type-execution {\n        border-left-color: ${this.theme.statusInfo};\n      }\n\n      .proof-item.proof-type-energy {\n        border-left-color: ${this.theme.statusSuccess};\n      }\n\n      .proof-item.proof-type-optimization {\n        border-left-color: ${this.theme.brandPrimary};\n      }\n\n      .proof-item.proof-type-calibration {\n        border-left-color: ${this.theme.statusWarning};\n      }\n\n      .proof-item.proof-type-thermodynamic {\n        border-left-color: ${this.theme.brandSecondary};\n      }\n\n      .proof-icon {\n        font-size: 1.25rem;\n      }\n\n      .proof-type {\n        font-family: ${this.theme.fontBody};\n        font-size: 0.875rem;\n        font-weight: 500;\n        color: ${this.theme.fgPrimary};\n        min-width: 100px;\n      }\n\n      .proof-value {\n        font-family: ${this.theme.fontMono};\n        font-size: 0.875rem;\n        font-weight: 600;\n        color: ${this.theme.statusSuccess};\n        min-width: 60px;\n        text-align: right;\n      }\n\n      .proof-source {\n        font-family: ${this.theme.fontMono};\n        font-size: 0.75rem;\n        color: ${this.theme.fgSecondary};\n        flex: 1;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n\n      .proof-time {\n        font-family: ${this.theme.fontBody};\n        font-size: 0.75rem;\n        color: ${this.theme.fgSecondary};\n        min-width: 60px;\n        text-align: right;\n      }\n\n      .empty-state {\n        padding: 2rem;\n        text-align: center;\n        color: ${this.theme.fgSecondary};\n        font-family: ${this.theme.fontBody};\n        font-size: 0.875rem;\n      }\n\n      @keyframes slideIn {\n        from {\n          opacity: 0;\n          transform: translateX(-20px);\n        }\n        to {\n          opacity: 1;\n          transform: translateX(0);\n        }\n      }\n    `;\n  }\n}\n\n// Register custom element\nif (!customElements.get('iv-proof-ticker')) {\n  customElements.define('iv-proof-ticker', IVProofTicker);\n}\n"]}