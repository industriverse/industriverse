{"version":3,"file":"iv-ami-pulse.js","sourceRoot":"","sources":["iv-ami-pulse.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * <iv-ami-pulse> Widget\n * Week 8: White-Label Platform\n * \n * Ambient Intelligence pulse visualization\n * Features:\n * - Real-time AmI activity indicator\n * - 4 AmI principles visualization (context, proactive, seamless, adaptive)\n * - Pulsing animation based on activity level\n * - Color-coded by intelligence type\n * - Subtle, non-intrusive design\n */\n\nimport { IVWidget } from './base/IVWidget';\n\ninterface AmIPulseData {\n  activityLevel: number; // 0-100\n  contextAwareness: number; // 0-100\n  proactivity: number; // 0-100\n  seamlessness: number; // 0-100\n  adaptivity: number; // 0-100\n  intelligenceType: 'learning' | 'predicting' | 'adapting' | 'idle';\n  lastActivity: number;\n}\n\nexport class IVAMIPulse extends IVWidget {\n  protected attachEventListeners(): void {\n    const container = this.shadowRoot?.querySelector('.pulse-container');\n    container?.addEventListener('click', () => this.toggleDetails());\n  }\n\n  protected pulseData: AmIPulseData = {\n    activityLevel: 0,\n    contextAwareness: 0,\n    proactivity: 0,\n    seamlessness: 0,\n    adaptivity: 0,\n    intelligenceType: 'idle',\n    lastActivity: Date.now(),\n  };\n\n  protected showingDetails: boolean = false;\n\n  constructor() {\n    super();\n  }\n\n  protected getDefaultStyles(): string {\n    return `\n      :host {\n        display: inline-block;\n        font-family: var(--font-sans, system-ui, sans-serif);\n      }\n\n      .pulse-container {\n        position: relative;\n        width: 60px;\n        height: 60px;\n        cursor: pointer;\n        transition: transform 0.2s ease;\n      }\n\n      .pulse-container:hover {\n        transform: scale(1.1);\n      }\n\n      .pulse-core {\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        width: 20px;\n        height: 20px;\n        border-radius: 50%;\n        background: var(--ami-context-glow, rgba(14, 165, 233, 0.8));\n        box-shadow: 0 0 10px var(--ami-context-glow, rgba(14, 165, 233, 0.5));\n        transition: all 0.3s ease;\n      }\n\n      .pulse-core.learning {\n        background: var(--brand-primary, #0ea5e9);\n        box-shadow: 0 0 15px var(--brand-primary, #0ea5e9);\n      }\n\n      .pulse-core.predicting {\n        background: var(--brand-secondary, #8b5cf6);\n        box-shadow: 0 0 15px var(--brand-secondary, #8b5cf6);\n      }\n\n      .pulse-core.adapting {\n        background: var(--brand-accent, #f59e0b);\n        box-shadow: 0 0 15px var(--brand-accent, #f59e0b);\n      }\n\n      .pulse-core.idle {\n        background: var(--color-muted, #64748b);\n        box-shadow: 0 0 5px var(--color-muted, #64748b);\n      }\n\n      .pulse-ring {\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        border-radius: 50%;\n        border: 2px solid var(--ami-context-glow, rgba(14, 165, 233, 0.5));\n        animation: pulse-expand 2s ease-out infinite;\n      }\n\n      .pulse-ring:nth-child(2) {\n        animation-delay: 0.5s;\n      }\n\n      .pulse-ring:nth-child(3) {\n        animation-delay: 1s;\n      }\n\n      @keyframes pulse-expand {\n        0% {\n          width: 20px;\n          height: 20px;\n          opacity: 1;\n        }\n        100% {\n          width: 60px;\n          height: 60px;\n          opacity: 0;\n        }\n      }\n\n      .pulse-details {\n        position: absolute;\n        top: 70px;\n        left: 50%;\n        transform: translateX(-50%);\n        background: var(--color-background, #1a1a1a);\n        border: 1px solid var(--color-border, #333);\n        border-radius: 8px;\n        padding: 12px;\n        min-width: 200px;\n        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);\n        z-index: 100;\n        opacity: 0;\n        pointer-events: none;\n        transition: opacity 0.2s ease;\n      }\n\n      .pulse-details.visible {\n        opacity: 1;\n        pointer-events: auto;\n      }\n\n      .details-title {\n        font-size: 12px;\n        font-weight: 600;\n        color: var(--color-foreground, #e5e5e5);\n        margin-bottom: 8px;\n        text-align: center;\n      }\n\n      .ami-metric {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 6px;\n        font-size: 11px;\n      }\n\n      .metric-label {\n        color: var(--color-muted-foreground, #888);\n      }\n\n      .metric-value {\n        color: var(--color-foreground, #e5e5e5);\n        font-weight: 600;\n      }\n\n      .metric-bar {\n        width: 100%;\n        height: 3px;\n        background: rgba(255, 255, 255, 0.1);\n        border-radius: 2px;\n        overflow: hidden;\n        margin-top: 2px;\n      }\n\n      .metric-fill {\n        height: 100%;\n        background: linear-gradient(90deg, var(--brand-primary, #0ea5e9), var(--brand-secondary, #8b5cf6));\n        transition: width 0.5s ease;\n      }\n\n      .activity-indicator {\n        position: absolute;\n        top: 0;\n        right: 0;\n        width: 8px;\n        height: 8px;\n        border-radius: 50%;\n        background: var(--status-success, #10b981);\n        border: 2px solid var(--color-background, #1a1a1a);\n      }\n\n      .activity-indicator.active {\n        animation: blink 1s ease-in-out infinite;\n      }\n\n      @keyframes blink {\n        0%, 100% {\n          opacity: 1;\n        }\n        50% {\n          opacity: 0.3;\n        }\n      }\n    `;\n  }\n\n  protected render(): void {\n    if (!this.shadowRoot) return;\n\n    const isActive = this.pulseData.activityLevel > 10;\n    const detailsClass = this.showingDetails ? 'visible' : '';\n\n    this.shadowRoot.innerHTML = `\n      <style>${this.getDefaultStyles()}</style>\n      <div class=\"pulse-container\">\n        <div class=\"pulse-core ${this.pulseData.intelligenceType}\"></div>\n        ${isActive ? `\n          <div class=\"pulse-ring\"></div>\n          <div class=\"pulse-ring\"></div>\n          <div class=\"pulse-ring\"></div>\n        ` : ''}\n        ${isActive ? '<div class=\"activity-indicator active\"></div>' : ''}\n        <div class=\"pulse-details ${detailsClass}\">\n          <div class=\"details-title\">AmI Principles</div>\n          ${this.renderMetric('Context Awareness', this.pulseData.contextAwareness)}\n          ${this.renderMetric('Proactivity', this.pulseData.proactivity)}\n          ${this.renderMetric('Seamlessness', this.pulseData.seamlessness)}\n          ${this.renderMetric('Adaptivity', this.pulseData.adaptivity)}\n          <div style=\"margin-top: 8px; padding-top: 8px; border-top: 1px solid var(--color-border, #333); text-align: center;\">\n            <div style=\"font-size: 10px; color: var(--color-muted-foreground, #888);\">\n              ${this.getStatusText()}\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n\n    this.attachEventListeners();\n  }\n\n  protected renderMetric(label: string, value: number): string {\n    return `\n      <div class=\"ami-metric\">\n        <span class=\"metric-label\">${label}</span>\n        <span class=\"metric-value\">${value}%</span>\n      </div>\n      <div class=\"metric-bar\">\n        <div class=\"metric-fill\" style=\"width: ${value}%\"></div>\n      </div>\n    `;\n  }\n\n  protected getStatusText(): string {\n    switch (this.pulseData.intelligenceType) {\n      case 'learning':\n        return 'Learning from context...';\n      case 'predicting':\n        return 'Predicting user needs...';\n      case 'adapting':\n        return 'Adapting to changes...';\n      default:\n        return 'Ambient intelligence idle';\n    }\n  }\n\n  protected toggleDetails(): void {\n    this.showingDetails = !this.showingDetails;\n    this.render();\n    this.emitEvent('details-toggled', { showing: this.showingDetails });\n  }\n\n  protected handleWebSocketMessage(data: any): void {\n    if (data.type === 'ami_update') {\n      this.updatePulse(data.data);\n    }\n  }\n\n  public updatePulse(data: Partial<AmIPulseData>): void {\n    this.pulseData = { ...this.pulseData, ...data, lastActivity: Date.now() };\n    this.render();\n    this.emitEvent('ami-update', this.pulseData);\n  }\n\n  protected onConnect(): void {\n    this.render();\n  }\n\n  protected onDisconnect(): void {\n    // Cleanup\n  }\n\n  // Attribute handling\n  static get observedAttributes() {\n    return [\n      'activity-level',\n      'context-awareness',\n      'proactivity',\n      'seamlessness',\n      'adaptivity',\n      'intelligence-type',\n      'ws-url',\n    ];\n  }\n\n  attributeChangedCallback(name: string, oldValue: string, newValue: string) {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'activity-level':\n        this.pulseData.activityLevel = parseFloat(newValue) || 0;\n        this.render();\n        break;\n      case 'context-awareness':\n        this.pulseData.contextAwareness = parseFloat(newValue) || 0;\n        this.render();\n        break;\n      case 'proactivity':\n        this.pulseData.proactivity = parseFloat(newValue) || 0;\n        this.render();\n        break;\n      case 'seamlessness':\n        this.pulseData.seamlessness = parseFloat(newValue) || 0;\n        this.render();\n        break;\n      case 'adaptivity':\n        this.pulseData.adaptivity = parseFloat(newValue) || 0;\n        this.render();\n        break;\n      case 'intelligence-type':\n        this.pulseData.intelligenceType = newValue as any;\n        this.render();\n        break;\n      case 'ws-url':\n        this.config.wsUrl = newValue;\n        if (newValue) {\n          this.connectWebSocket();\n        }\n        break;\n    }\n  }\n}\n\n// Register custom element\nif (!customElements.get('iv-ami-pulse')) {\n  customElements.define('iv-ami-pulse', IVAMIPulse);\n}\n"]}